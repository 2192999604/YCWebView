# webView抓包分析
#### 目录介绍
- 01.基础操作步骤
- 02.
- 07.一些问题答疑


### 01.基础操作步骤
- 1、在res-xml目录中创建一个名为 “network_security_config.xml”的文件夹：并且附上如下内容:
    ```
    <network-security-config>
        <base-config cleartextTrafficPermitted="true">
            <trust-anchors>
                <certificates src="system" overridePins="true" />
                <certificates src="user" overridePins="true" />
            </trust-anchors>
        </base-config>
    </network-security-config>
    ```
- 2、在AndroidManifest里的<application>标签中，添加代码：
    ```
    android:networkSecurityConfig="@xml/network_security_config"
    ```
- 3、重新运行项目，然后使用Charles抓包，成功。（要是你抓包不成功，请百度一下，如何使用Charles抓包，并且进行相关配置）
    - 关于android普通抓包的问题是解决了，发现一个新问题：android7.0以上的手机，开着网络代理访问不了详情页（webview）
    - 需要在webview的WebViewClient中，将下面这行代码给注释掉
    ```
    super.onReceivedSslError(view, handler, error);
    ```
    - 这一段代码是为了忽略掉SSL证书错误，因为开启代理后网络会变得不安全，证书会错误，webview检测到证书错误之后就直接让webview白板，不请求任何数据。 这一节是为了忽略掉父类的处理，然后默认走下去。



### 07.一些问题答疑
- 访问chrome://inspect/#devices如果chrome没有检测到Remote Target中的页面，可能需要安装一下chrome的ADB插件；
- 对于腾讯系的APP，默认采用X5内核，需要将WebViewDebugHook的git目录下的debug.conf文件拷贝到SD卡的根目录下即可。 


### 08.参考内容
- WebViewDebugHook
    - https://github.com/feix760/WebViewDebugHook
- WebView拦截请求详解
    - https://blog.csdn.net/qq_19431333/article/details/52351437








